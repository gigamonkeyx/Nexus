<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="50" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Agent Architecture</text>
  
  <!-- Agent Container -->
  <rect x="50" y="100" width="700" height="450" rx="15" ry="15" fill="#f5f5f5" stroke="#ddd" stroke-width="2"/>
  <text x="400" y="130" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Agent</text>
  
  <!-- Core Components Layer -->
  <rect x="100" y="150" width="600" height="150" rx="10" ry="10" fill="#e3f2fd" stroke="#bbdefb" stroke-width="2"/>
  <text x="400" y="175" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Core Components</text>
  
  <!-- Core Model -->
  <rect x="120" y="190" width="170" height="90" rx="5" ry="5" fill="#4285f4" opacity="0.8"/>
  <text x="205" y="230" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Core Model</text>
  <text x="205" y="250" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Claude, GPT-4, Llama 3</text>
  
  <!-- Context Manager -->
  <rect x="315" y="190" width="170" height="90" rx="5" ry="5" fill="#0f9d58" opacity="0.8"/>
  <text x="400" y="230" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Context Manager</text>
  <text x="400" y="250" font-family="Arial" font-size="12" text-anchor="middle" fill="white">State Management</text>
  
  <!-- Tool Router -->
  <rect x="510" y="190" width="170" height="90" rx="5" ry="5" fill="#db4437" opacity="0.8"/>
  <text x="595" y="230" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Tool Router</text>
  <text x="595" y="250" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Tool Dispatch</text>
  
  <!-- Cognitive Layer -->
  <rect x="100" y="320" width="600" height="100" rx="10" ry="10" fill="#e8f5e9" stroke="#c8e6c9" stroke-width="2"/>
  <text x="400" y="345" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Cognitive Layer</text>
  
  <!-- Task Planner -->
  <rect x="120" y="360" width="170" height="50" rx="5" ry="5" fill="#f4b400" opacity="0.8"/>
  <text x="205" y="390" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Task Planner</text>
  
  <!-- Reasoning Engine -->
  <rect x="315" y="360" width="170" height="50" rx="5" ry="5" fill="#673ab7" opacity="0.8"/>
  <text x="400" y="390" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Reasoning Engine</text>
  
  <!-- Learning Module -->
  <rect x="510" y="360" width="170" height="50" rx="5" ry="5" fill="#ff6d00" opacity="0.8"/>
  <text x="595" y="390" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Learning Module</text>
  
  <!-- Storage Layer -->
  <rect x="100" y="440" width="600" height="90" rx="10" ry="10" fill="#fff3e0" stroke="#ffe0b2" stroke-width="2"/>
  <text x="400" y="465" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Storage Layer</text>
  
  <!-- Memory System -->
  <rect x="120" y="480" width="275" height="40" rx="5" ry="5" fill="#3f51b5" opacity="0.8"/>
  <text x="257.5" y="505" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Memory System</text>
  
  <!-- Knowledge Base -->
  <rect x="405" y="480" width="275" height="40" rx="5" ry="5" fill="#009688" opacity="0.8"/>
  <text x="542.5" y="505" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Knowledge Base</text>
  
  <!-- External Connections -->
  <!-- User Input -->
  <path d="M 400 80 L 400 100" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="420" y="90" font-family="Arial" font-size="12" fill="#333">User Input</text>
  
  <!-- Agent Response -->
  <path d="M 380 100 L 380 80" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="350" y="90" font-family="Arial" font-size="12" text-anchor="end" fill="#333">Response</text>
  
  <!-- MCP Servers -->
  <path d="M 750 300 L 700 300" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="770" y="305" font-family="Arial" font-size="12" text-anchor="end" fill="#333">MCP Servers</text>
  
  <!-- Tool Results -->
  <path d="M 700 320 L 750 320" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="770" y="325" font-family="Arial" font-size="12" text-anchor="end" fill="#333">Tool Results</text>
  
  <!-- Internal Connections -->
  <!-- Core Model to Context Manager -->
  <path d="M 290 235 L 315 235" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Context Manager to Core Model -->
  <path d="M 315 245 L 290 245" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Context Manager to Tool Router -->
  <path d="M 485 235 L 510 235" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Tool Router to Context Manager -->
  <path d="M 510 245 L 485 245" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Core Model to Task Planner -->
  <path d="M 205 280 L 205 360" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Task Planner to Core Model -->
  <path d="M 225 360 L 225 280" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Core Model to Reasoning Engine -->
  <path d="M 290 260 L 400 360" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Reasoning Engine to Core Model -->
  <path d="M 380 360 L 270 260" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Memory System to Context Manager -->
  <path d="M 257.5 480 L 350 280" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Context Manager to Memory System -->
  <path d="M 370 280 L 277.5 480" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Knowledge Base to Reasoning Engine -->
  <path d="M 542.5 480 L 450 410" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Tool Router to External -->
  <path d="M 680 235 L 750 235" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="770" y="240" font-family="Arial" font-size="12" text-anchor="end" fill="#333">Tool Calls</text>
  
  <!-- External to Tool Router -->
  <path d="M 750 255 L 680 255" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="770" y="260" font-family="Arial" font-size="12" text-anchor="end" fill="#333">Tool Responses</text>
  
  <!-- Arrow Marker -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="600" y="520" width="180" height="60" rx="5" ry="5" fill="white" stroke="#ccc"/>
  <text x="620" y="540" font-family="Arial" font-size="14" font-weight="bold" fill="#333">Layers</text>
  <rect x="620" y="550" width="15" height="10" fill="#e3f2fd"/>
  <text x="640" y="560" font-family="Arial" font-size="12" fill="#333">Core Components</text>
  <rect x="620" y="565" width="15" height="10" fill="#e8f5e9"/>
  <text x="640" y="575" font-family="Arial" font-size="12" fill="#333">Cognitive Layer</text>
</svg>
